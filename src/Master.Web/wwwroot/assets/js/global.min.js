function L(n){return abp.localization.localize(n)}function getEvent(){var t,n;if(document.all)return window.event;for(t=getEvent.caller;t!==null&&t.arguments;){if(n=t.arguments[0],n&&(n.constructor===Event||n.constructor===MouseEvent||typeof n=="object"&&n.preventDefault&&n.stopPropagation))return n;t=t.caller}return null}function getCheckboxValue(n){var t=[];return $(":checked[name='"+n+"']").each(function(){t.push($(this).val())}),t}function Full(){var n=$("#LAY_app_tabs").offset().left;console.log(n);n>0?($("#LAY_app_tabs").addClass("quanping-tabs"),$("#LAY_app_body").addClass("quanping-body")):n==0&&($("#LAY_app_tabs").removeClass("quanping-tabs"),$("#LAY_app_body").removeClass("quanping-body"))}function numFormat(n){if(!n)return"";typeof n!="number"&&(n=parseFloat(n));var t=n.toString();return t.indexOf(".")==-1&&(t+=".00"),n.toFixed(t.split(".")[1].length).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function numBack(n){return n.replace(/[^0-9|.]/ig,"")}var config={layuiBase:"/assets/layuiadmin/",layuiIndex:"lib/index",layuiExtends:{authtree:"lib/extend/authtree",ztree:"lib/extend/ztree/ztree",droptree:"lib/extend/droptree",tableSelect:"../lib/extend/tableselect/tableSelect",treeGrid:"../lib/extend/treegrid/treegrid",verifyInit:"../lib/extend/verifyInit/verifyInit",multiSelect:"../lib/extend/multiSelect/multiSelect",soulTable:"../lib/extend/soulTable/soulTable"},layuiModules:["index","table","layer","form","element","laydate","tree","upload","colorpicker","tableSelect","verifyInit","multiSelect","soulTable"],ready:function(){console.log("onready not implemented")},readyFuncs:[],onTableDone:function(n,t,i){config.onTableDoneExport(n,t,i);console.log("onTableDone not implemented")},onTableDoneExport:function(){},tableRowdone:function(){},tableCheckBoxdone:function(){},reloadTable:function(){console.log("reloadTable not implemented")},refresh:function(){console.log("refresh not implemented")},showSearchForm:function(n){var t="/ModuleData/Search?moduleKey="+n;layer.open({type:2,title:L("检索"),closeBtn:1,shade:.1,shadeClose:!0,area:["600px","100%"],offset:"l",anim:3,content:[t],end:function(){}})},showRelativeModuleForm:function(n){var t=n.moduleKey,i=n.columnKey,r=n.maxReferenceNumber||1,u="/ModuleData/RelativeSelect?moduleKey="+t+"&columnKey="+i+"&maxReferenceNumber"+r;window.referenceLayerIndex=layer.open({type:2,title:L("关联查询"),closeBtn:1,shade:.1,shadeClose:!0,area:["80%","100%"],offset:"r",anim:0,content:[u],end:function(){}})}},func;(function(){const n=Array.prototype,t=Object.create(n);Object.defineProperty(t,"push",{value:function(){const i=n.push;let t=arguments;if(func.typeof(t[0])=="function")i.apply(this,t);else{console.warn("往这个数组里传非函数类型的，将无效！");return}config.readyFuncs.hadRun&&(t[0](),console.warn("layui的use已完成，这个数组已经遍历运行过了，直接执行吧！"))}});config.readyFuncs.__proto__=t})();$(function(){function n(n){var t=n.target.tagName.toLowerCase(),i;(t=="input"||t=="textarea")&&(i=n.key?n.key.toLowerCase():"",i=="z"&&n.altKey&&$(n.target).val($(n.target).val()+"φ"))}document.addEventListener("keyup",n);$("body").on("mouseenter","*[tips]",function(){var n;if(layer){if(n=$(this),!n.attr("tips"))return;var i=n.attr("tips"),t=n.attr("lay-offset"),r=n.attr("lay-direction"),u=n.attr("lay-background"),f=n.attr("lay-area"),e=layer.tips(i,this,{tips:[r||1,u||"#000"],time:-1,anim:-1,maxWidth:f||"",success:function(n){t&&n.css("margin-left",t+"px")}});n.data("index",e)}}).on("mouseleave","*[tips]",function(){layer&&layer.close($(this).data("index"))});$("body").on("mouseenter","*[formtips]",function(){var n=$(this);if(n.attr("formtips")){var i=n.attr("formtips"),r=n.attr("lay-background"),t=n.attr("lay-offset"),u=n.attr("lay-direction"),f=layer.tips(i,this,{tips:[u||1,r||"#FFB800"],time:-1,success:function(n){t&&n.css("margin-left",t+"px");n.css("width","auto");n.css("max-width","600px")}});n.data("index",f)}}).on("mouseleave","*[formtips]",function(){layer.close($(this).data("index"))});$("body").on("mouseenter","*[timetips]",function(){function u(){if(layer){if(!n.attr("timetips"))return;var u=n.attr("timetips"),r=n.attr("lay-offset"),f=n.attr("lay-direction"),e=n.attr("lay-background"),o=n.attr("lay-area");t=layer.tips(u,i,{tips:[f||1,e||"#000"],time:-1,anim:-1,maxWidth:o||"",success:function(n){r&&n.css("margin-left",r+"px")}})}}var i=this,n=$(this),t,r=setTimeout(function(){u()},500);n.on("mouseleave",function(){layer&&layer.close(t);clearTimeout(r)})});$("body").on("click",".laydialog",function(){var n=$(this),i=n.attr("url"),r,t;i.indexOf("http")==0||i.indexOf("/")==0?(r=2,t=n.attr("url")):(r=1,t=$(i),console.log(t));layer.open({type:r,shade:.8,shadeClose:!0,title:n.attr("title")||n.text(),area:[n.attr("width")||"80%",n.attr("height")||"80%"],content:t})});func.initUI();$("body").on("click","img.thumb",function(){var n=$(this),r=n.attr("FileID"),t=/(.*?)(?:[\?&]w=\d+)|(.*)/.exec(n.attr("src")),i=t[1]||t[2];layuiExt.fLayerImg("",i)});$("table[module]").each(function(){var n=$(this).attr("module");layui.sessionData(n,null)})});func={"typeof":function(n){if(arguments.length===0)return new Error("type方法未传参");var t=Object.prototype.toString.call(n);return t.match(/\[object (.*?)\]/)[1].toLowerCase()},array:{distinct:function(){return this.reduce(function(n,t){return n.indexOf(t)==-1&&n.push(t),n},[])}},splitDrag:function(n,t,i){var r,u;i=i||{};$.extend(i,{left:10,right:500});r=t.parent();r=i.wrap?typeof i.wrap=="string"?$(i.wrap):i.wrap:r;r.append('<div id="r-treedrag"><div id="r-treedrag-ul">\n <\/div>\n <div id="r-treedrag-width"><\/div>\n <div id="r-treedrag-table">\n <div class="r-treedrag-table_wrap">\n <\/div>\n  <\/div>\n <\/div>');$("#r-treedrag-ul").append(n);$(".r-treedrag-table_wrap").append(t);u=layui.data("manyChangeWidth")[i.key];u?$("#r-treedrag-ul").width(u):layui.data("manyChangeWidth",{key:i.key,value:"250"}),function(){var n=document.getElementById("r-treedrag-width"),t=0;n.onmousedown=function(r){var f=r||event,u;return t=f.clientX-n.offsetLeft,u=$(".r-treedrag").outerWidth(!0)-$(".r-treedrag").width()/2,console.log(u),document.onmousemove=function(n){var f=n||event,r=f.clientX-t-u;r<i.left?r=i.left:r>i.right&&(r=i.right);$("#r-treedrag-ul").width(r);layui.data("manyChangeWidth",{key:i.key,value:r})},document.onmouseup=function(){document.onmousemove=null;document.onmouseup=null},!1}}()},formatDate:function(n,t){var t=$.extend({type:"S",split:"-"},t),e=t.split,o=n.getFullYear(),r=n.getMonth()+1,u=n.getDate(),f=o+e+(r<10?"0"+r:r)+e+(u<10?"0"+u:u),i;switch(t.type){case"S":i=f+" "+n.toTimeString().substr(0,8);break;case"M":i=f+" "+n.toTimeString().substr(0,5);break;case"H":i=f+" "+n.toTimeString().substr(0,2);break;case"Day":i=f;break;case"Mounth":i=(r<10?"0"+r:r)+e+(u<10?"0"+u:u);break;default:i=f+" "+n.toTimeString().substr(0,8)}return i},judgeFileType:function(t){function r(t){/./g.test(t)&&(t=t.split("."),t=t[t.length-1]);var r,i={excal:[["excal","docx","doc","xls","xlsx"],"icon-excel","#289be5"],zip:[["zip","gzip"],"icon-yasuobao","#289be5"],pdf:[["pdf"],"icon-pdf1","#289be5"],txt:[["txt"],"icon-txt","#289be5"],video:[["mp4","avi","WAV","rm","rmvb","mpeg1","mpeg2","mpeg3","mpeg4","mov","mtv","dat","wmv","avi","3gp","amv","dmv","flv"],"icon-filevideo","#289be5"],cad:[["dwg","dwt","dxf","dws"],"icon-CAD","#289be5"],jpg:["bmp,jpg,png,tif,gif,pcx,tga,exif,fpx,svg,psd,cdr,pcd,dxf,ufo,eps,ai,raw,WMF,webp,jpeg,svg,smp".split(","),"","#289be5"]};for(n in i)i[n][0].forEach(function(u){u.toLowerCase()==t.toLowerCase()&&(r={type:n,iconfont:"iconfont "+i[n][1],color:i[n][2]})});return r?r:u}var u={type:"default",iconfont:"iconfont icon-m-fileFormat",color:"#000"},i;return t instanceof Array?(i=[],t.forEach(function(n){i.push(r(n))}),i):typeof t=="string"?r(t):void 0},renderUpload:function(n,t){var i=$.extend({trigger:"dblclick",uploadType:"single",multiple:!1,mode:"file|snap"},t);$("body").on(i.trigger,n,function(){try{window.upload={element:this,callback:i.callback||($(this).attr("callback")?eval($(this).attr("callback")):$.noop)};layer.open({type:2,title:"文件上传",shadeClose:!1,shade:.8,area:["500px","400px"],content:"/File/CommonUpload?multiple="+i.multiple+"&mode="+i.mode})}catch(n){}})},getModuleServiceName:function(n){return n?n[0].toLowerCase()+n.substring(1):"moduleData"},callModuleButtonEvent:function(n){var h=getEvent(),p,o,u,s,w,b;$.isPlainObject(n)&&(n.attr=function(t){return n[t]});var t=n||$(h.srcElement||h.target),f=t.attr("modulekey"),nt=t.attr("lay-event"),c=t.attr("dataid"),l=t.attr("confirmmsg"),k=t.attr("title"),a=t.attr("buttonname"),e=t.attr("buttonactiontype"),v=t.attr("params"),i=t.attr("buttonactionurl"),y=t.attr("callback"),d=t.attr("opentop"),g=t.attr("fornonerow"),r=[];if(r=layui.table.checkStatus(f).data.map(function(n){return n.id||n.Id}),c)r=[c];else if(!g&&r.length===0)return abp.message.info("请先选择记录"),!1;if(p=i.indexOf("#")>0?i.split("#")[1]:"",o=i.split("#")[0]+(i.indexOf("?")>0?"&":"?")+"modulekey="+f+"&data="+r.join(",")+"#"+p,e==="Ajax"){if(s=eval(i),!s)return layer.alert("未找到代理方法"+i),!1;u=function(){func.runAsync(s(r).done(function(n){var t=!0;(y&&(t=eval(y)(n)),t)&&(parent.layer.msg("提交成功"),f&&func.reload(f))}))}}else e==="Form"?(w={type:2,title:k||a,scrollbar:!1,shadeClose:!1,shade:.8,area:["100%","100%"],content:o,btn:["提交","关闭"],btnAlign:"l",yes:function(n,t){var i=t.find("iframe")[0].contentWindow;if(i.submit)return i.submit(),!1},btn2:function(n,t){var i=t.find("iframe")[0].contentWindow;if(i.submit2)return i.submit2(),!1},btn3:function(n,t){var i=t.find("iframe")[0].contentWindow;if(i.submit3)return i.submit3(),!1}},b=v?$.parseJSON(v):{},u=function(){(d?top.layer:layer).open($.extend(w,b))}):e==="Tab"&&(u=function(){top.layui.index.openTabsPage(o,a)});l?abp.message.confirm(l,u):u()},reload:function(n,t){layui.table.reload(n,t)},runAsync:function(n){top.abp.ui.setBusy(null,n)},initForm:function(){layui.data("session").loginInfo&&$.extend(abp.session,JSON.parse(layui.data("session").loginInfo));$("div.layui-inline").each(function(){var t=$(this).parent(),n=$(this).prev();t.is(".layui-form-item")||(n.is(".layui-form-item")?$(this).appendTo(n):$(this).wrap('<div class="layui-form-item"><\/div>'))});$("table[lay-filter]").each(function(){var n=$(this).attr("lay-filter");layui.table.on("row("+n+")",function(n){$(n.tr).hasClass("my-table-active")?$(n.tr).removeClass("my-table-active"):($(n.tr).addClass("my-table-active"),$(n.tr).siblings().removeClass("my-table-active"));config.tableRowdone(n)});layui.table.on("checkbox("+n+")",function(t){t.type=="all"?t.checked?$('[lay-filter="'+n+'"]').siblings(".layui-table-view").find("tbody tr").addClass("my-table-active_checked"):$('[lay-filter="'+n+'"]').siblings(".layui-table-view").find("tbody tr").removeClass("my-table-active_checked"):t.checked?$(t.tr).addClass("my-table-active_checked"):($(t.tr).removeClass("my-table-active_checked"),$(t.tr).removeClass("my-table-active"));config.tableCheckBoxdone(t)})})},initUI:function(n){func.initLayout(n);func.renderUpload(".uploadinsert")},initLayout:function(n){var t=n||$("body");t.find("[layouth]").each(function(){var t=$(this).attr("layouth"),n=top.$(".layui-body").height();n=n-parseInt(t);$(this).css("overflow-y","auto");$(this).css("height",n+"px")})},buildSearchCondition:function(n){var t=layui.sessionData(n).conditions;return t&&t!=""?JSON.stringify(t):""},bringBack:function(n,t){var i=layui.table.checkStatus(n),r;if(i.data.length==0)return layer.msg(L("请至少选择一项"),{icon:5,anim:6}),!1;r=$.getUrlParam("key");parent.func.getBringBack(i.data,r,t)},getBringBack:function(n,t,i){func.bringBackFuncs[t](n)&&i&&layer.closeAll("iframe");console.log(n)},bringBackFuncs:[],referenceDatas:[]};abp.localization.defaultSourceName="Master";abp.auth.isGranted=function(n){return abp.auth.grantedPermissions[n]!=undefined||!abp.auth.allPermissions[n]};$.extend({num2CN:function(n){var t,u,r,i;if(!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))return"数据非法";for(t="京亿万仟佰拾兆万仟佰拾亿仟佰拾万仟佰拾元角分",u="",n+="00",r=n.indexOf("."),r>=0&&(n=n.substring(0,r)+n.substr(r+1,2)),t=t.substr(t.length-n.length),i=0;i<n.length;i++)u+="零壹贰叁肆伍陆柒捌玖".charAt(n.charAt(i))+t.charAt(i);return u.replace(/零(仟|佰|拾|角)/g,"零").replace(/(零)+/g,"零").replace(/零(兆|万|亿|元)/g,"$1").replace(/(兆|亿)万/g,"$1").replace(/(京|兆)亿/g,"$1").replace(/(京)兆/g,"$1").replace(/(京|兆|亿|仟|佰|拾)(万?)(.)仟/g,"$1$2零$3仟").replace(/^元零?|零分/g,"").replace(/(元|角)$/g,"$1整")},arrayToObj:function(n){for(var t,i={},r=0;r<n.length;r++)t=n[r],t.name in i?i[t.name]+=","+t.value:i[t.name]=t.value;return i},getUrlParam:function(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(i);return t!==null?decodeURIComponent(t[2]):null},newid:function(){return(new Date).getTime()+""+Math.round(Math.random()*1e3)}});Date.prototype.pattern=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(n)&&(n=n.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"}[this.getDay()+""]));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return+this==0||isNaN(+this)?"":n};Date.prototype.addDay=function(n,t,i){n=n||1;t=t||"d";switch(t.toLowerCase()){case"y":this.setFullYear(this.getFullYear()+n);break;case"m":this.setMonth(this.getMonth()+n);break;case"d":this.setDate(this.getDate()+n);break;case"w":this.setDate(this.getDate()+7*n);break;case"h":this.setHours(this.getHours()+n);break;case"n":this.setMinutes(this.getMinutes()+n);break;case"s":this.setSeconds(this.getSeconds()+n);break;case"l":this.setMilliseconds(this.getMilliseconds()+n)}return i?this.pattern(i):this};Vue.directive("disabled",function(n,t){t.value?($(n).addClass("layui-disabled"),$(n).attr("disabled",!0)):($(n).removeClass("layui-disabled"),$(n).attr("disabled",!1))});Vue.filter("objEmptyStr",function(n,t){return n?n[t]:""});window.setInterval(function(){if($(".soul-bottom-contion").length>0){var n=$(".soul-bottom-contion").width();$(".condition-items").css("width",n-125+"px")}},1e3);